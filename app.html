<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cotizador de Impresi√≥n</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .form-container {
            padding: 30px;
        }

        .form-section {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }

        .form-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-section h2::before {
            content: "‚Ä¢";
            color: #3498db;
            font-size: 1.5em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .radio-group, .checkbox-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .radio-group label, .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: normal;
            cursor: pointer;
        }

        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        input[type="radio"],
        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #3498db;
        }

        .quantity-inputs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .quantity-group {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e1e8ed;
        }

        .quantity-group label {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-calculate {
            background: linear-gradient(135deg, #27ae60, #229954);
            width: 100%;
            font-size: 18px;
            padding: 18px;
        }

        .btn-calculate:hover {
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .results {
            margin-top: 30px;
            padding: 25px;
            background: #e8f5e8;
            border-radius: 10px;
            border-left: 4px solid #27ae60;
            display: none;
        }

        .results.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .total {
            font-size: 2em;
            font-weight: bold;
            color: #27ae60;
            text-align: center;
            margin: 20px 0;
        }

        .items-list {
            margin: 20px 0;
        }

        .item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #d5dbdb;
        }

        .item:last-child {
            border-bottom: none;
        }

        .message {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            color: #856404;
        }

        .message.error {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .print-type-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 2px solid #e1e8ed;
        }

        .print-type-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .form-container {
                padding: 20px;
            }
            
            .radio-group, .checkbox-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .quantity-inputs {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üñ®Ô∏è Cotizador de Impresi√≥n</h1>
            <p>Calcula el costo de tus trabajos de impresi√≥n de forma r√°pida y sencilla</p>
        </div>

        <div class="form-container">
            <form id="cotizadorForm">
                <!-- Configuraci√≥n b√°sica -->
                <div class="form-section">
                    <h2>Configuraci√≥n B√°sica</h2>
                    
                    <div class="form-group">
                        <label>Gramaje del Papel:</label>
                        <div class="radio-group" id="gramajeGroup">
                            <!-- Se llena din√°micamente -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Tama√±o del Papel:</label>
                        <div class="radio-group" id="tamanoGroup">
                            <!-- Se llena din√°micamente -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label>M√©todo de Pago:</label>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="metodo_pago" value="tarjeta" checked>
                                üí≥ Tarjeta
                            </label>
                            <label>
                                <input type="radio" name="metodo_pago" value="efectivo">
                                üíµ Efectivo
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Impresi√≥n en Color -->
                <div class="form-section">
                    <h2>üé® Impresi√≥n en Color</h2>
                    <div class="quantity-inputs">
                        <div class="quantity-group">
                            <label>Simple Faz (cantidad):</label>
                            <input type="number" id="color_simple" name="color_simple" min="0" value="0">
                        </div>
                        <div class="quantity-group">
                            <label>Doble Faz (cantidad):</label>
                            <input type="number" id="color_doble" name="color_doble" min="0" value="0">
                        </div>
                    </div>
                </div>

                <!-- Impresi√≥n Blanco y Negro -->
                <div class="form-section">
                    <h2>‚ö´ Impresi√≥n Blanco y Negro</h2>
                    <div class="message" id="bnMessage">
                        Solo disponible para gramaje 75g
                    </div>
                    <div class="quantity-inputs">
                        <div class="quantity-group">
                            <label>Simple Faz (cantidad):</label>
                            <input type="number" id="bn_simple" name="bn_simple" min="0" value="0" disabled>
                        </div>
                        <div class="quantity-group">
                            <label>Doble Faz (cantidad):</label>
                            <input type="number" id="bn_doble" name="bn_doble" min="0" value="0" disabled>
                        </div>
                    </div>
                </div>

                <!-- Anillado -->
                <div class="form-section">
                    <h2>üìí Anillado</h2>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="anillado" name="anillado" value="s">
                            Incluir anillado en el presupuesto
                        </label>
                    </div>
                </div>

                <button type="button" class="btn btn-calculate" onclick="calcularPresupuesto()">
                    üßÆ Calcular Presupuesto
                </button>
            </form>

            <!-- Resultados -->
            <div class="results" id="results">
                <h2>üìä Resultado del Presupuesto</h2>
                <div class="total" id="totalAmount">$0.00</div>
                
                <div class="items-list" id="itemsList">
                    <!-- Los √≠tems se generan din√°micamente -->
                </div>
                
                <div class="message" id="resultMessage">
                    <!-- Mensajes informativos -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Matrices de precios (iguales a las de Python)
        const precios_bn = {
            "75g": {  
                "A4": {"simple": {"tarjeta": 167, "efectivo": 150}, "doble": {"tarjeta": 167*2, "efectivo": 150*2}},
                "Oficio": {"simple": {"tarjeta": 167, "efectivo": 150}, "doble": {"tarjeta": 167*2, "efectivo": 150*2}},
                "A3": {"simple": {"tarjeta": 245, "efectivo": 220}, "doble": {"tarjeta": 245*2, "efectivo": 220*2}}
            },
            "150g": {
                "A4": {"simple": {"tarjeta": 278, "efectivo": 250}, "doble": {"tarjeta": 445, "efectivo": 400}},
                "Oficio": {"simple": {"tarjeta": 410, "efectivo": 370}, "doble": {"tarjeta": 667, "efectivo": 600}},
                "A3": {"simple": {"tarjeta": 410, "efectivo": 370}, "doble": {"tarjeta": 667, "efectivo": 600}}
            },
            "200g": {
                "A4": {"simple": {"tarjeta": 367, "efectivo": 330}, "doble": {"tarjeta": 555, "efectivo": 500}},
                "Oficio": {"simple": {"tarjeta": 556, "efectivo": 500}, "doble": {"tarjeta": 889, "efectivo": 800}},
                "A3": {"simple": {"tarjeta": 556, "efectivo": 500}, "doble": {"tarjeta": 889, "efectivo": 800}}
            }
        };

        const precios_color = {
            "75g": {  
                "A4": {"simple": {"tarjeta": 555, "efectivo": 500}, "doble": {"tarjeta": 1000, "efectivo": 900}},
                "Oficio": {"simple": {"tarjeta": 610, "efectivo": 550}, "doble": {"tarjeta": 1055, "efectivo": 950}},
                "A3": {"simple": {"tarjeta": 1110, "efectivo": 1000}, "doble": {"tarjeta": 2000, "efectivo": 1800}}
            },
            "150g": {
                "A4": {"simple": {"tarjeta": 770, "efectivo": 700}, "doble": {"tarjeta": 1440, "efectivo": 1300}},
                "A3": {"simple": {"tarjeta": 1440, "efectivo": 1300}, "doble": {"tarjeta": 2600, "efectivo": 2400}}
            },
            "200g": {
                "A4": {"simple": {"tarjeta": 890, "efectivo": 800}, "doble": {"tarjeta": 1640, "efectivo": 1500}},
                "A3": {"simple": {"tarjeta": 1660, "efectivo": 1500}, "doble": {"tarjeta": 3110, "efectivo": 2800}}
            },
            "250g": {
                "A4": {"simple": {"tarjeta": 1220, "efectivo": 1100}, "doble": {"tarjeta": 2220, "efectivo": 2000}},
                "A3": {"simple": {"tarjeta": 1880, "efectivo": 1700}, "doble": {"tarjeta": 3550, "efectivo": 3200}}
            },
            "300g": {
                "A4": {"simple": {"tarjeta": 1330, "efectivo": 1200}, "doble": {"tarjeta": 2440, "efectivo": 2000}},
                "A3": {"simple": {"tarjeta": 2000, "efectivo": 1800}, "doble": {"tarjeta": 3770, "efectivo": 3400}}
            }
        };

        const anillado_precios = {
            "hasta_50": 2.0,
            "hasta_100": 3.0,
            "mas_100": 5.0
        };

        // Inicializar la aplicaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            inicializarOpciones();
            configurarEventListeners();
        });

        function inicializarOpciones() {
            // Gramajes
            const gramajes = ['75g', '150g', '200g', '250g', '300g'];
            const gramajeGroup = document.getElementById('gramajeGroup');
            
            gramajes.forEach(gramaje => {
                const label = document.createElement('label');
                label.innerHTML = `
                    <input type="radio" name="gramaje" value="${gramaje}" ${gramaje === '75g' ? 'checked' : ''}>
                    ${gramaje}
                `;
                gramajeGroup.appendChild(label);
            });

            // Tama√±os
            const tamanos = ['A4', 'Oficio', 'A3'];
            const tamanoGroup = document.getElementById('tamanoGroup');
            
            tamanos.forEach(tamano => {
                const label = document.createElement('label');
                label.innerHTML = `
                    <input type="radio" name="tamano" value="${tamano}" ${tamano === 'A4' ? 'checked' : ''}>
                    ${tamano}
                `;
                tamanoGroup.appendChild(label);
            });
        }

        function configurarEventListeners() {
            // Habilitar/deshabilitar B/N seg√∫n gramaje
            document.querySelectorAll('input[name="gramaje"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const bnSimple = document.getElementById('bn_simple');
                    const bnDoble = document.getElementById('bn_doble');
                    const bnMessage = document.getElementById('bnMessage');
                    
                    if (this.value === '75g') {
                        bnSimple.disabled = false;
                        bnDoble.disabled = false;
                        bnMessage.style.display = 'none';
                    } else {
                        bnSimple.disabled = true;
                        bnDoble.disabled = true;
                        bnSimple.value = 0;
                        bnDoble.value = 0;
                        bnMessage.style.display = 'block';
                    }
                });
            });
        }

        function calcularCostoBN(cantidad_simple, cantidad_doble, tamano, metodo_pago) {
            const total_impresiones = cantidad_simple + (cantidad_doble * 2);
            let rango;
            
            if (total_impresiones <= 50) {
                rango = "1-50";
            } else if (total_impresiones <= 200) {
                rango = "51-200";
            } else {
                rango = "201+";
            }

            // Para simplificar, usamos precios fijos como en el ejemplo original
            const precio_simple = precios_bn["75g"][tamano]["simple"][metodo_pago];
            let costo_simple = 0;
            let costo_doble = 0;

            if (cantidad_simple > 0) {
                costo_simple = precio_simple * cantidad_simple;
            }
            if (cantidad_doble > 0) {
                costo_doble = (precio_simple * 2) * cantidad_doble;
            }

            return {
                costo: costo_simple + costo_doble,
                rango: rango,
                total_impresiones: total_impresiones,
                total_hojas: cantidad_simple + cantidad_doble
            };
        }

        function calcularCostoColor(cantidad_simple, cantidad_doble, gramaje, tamano, metodo_pago) {
            let costo_simple = 0;
            let costo_doble = 0;

            // Verificar si el tama√±o est√° disponible para el gramaje
            if (!precios_color[gramaje] || !precios_color[gramaje][tamano]) {
                // Si no est√° disponible, usar A4 como fallback
                tamano = "A4";
            }

            if (cantidad_simple > 0) {
                costo_simple = precios_color[gramaje][tamano]["simple"][metodo_pago] * cantidad_simple;
            }
            if (cantidad_doble > 0) {
                costo_doble = precios_color[gramaje][tamano]["doble"][metodo_pago] * cantidad_doble;
            }

            return costo_simple + costo_doble;
        }

        function calcularPresupuesto() {
            // Obtener valores del formulario
            const gramaje = document.querySelector('input[name="gramaje"]:checked').value;
            const tamano = document.querySelector('input[name="tamano"]:checked').value;
            const metodo_pago = document.querySelector('input[name="metodo_pago"]:checked').value;
            
            const color_simple = parseInt(document.getElementById('color_simple').value) || 0;
            const color_doble = parseInt(document.getElementById('color_doble').value) || 0;
            const bn_simple = parseInt(document.getElementById('bn_simple').value) || 0;
            const bn_doble = parseInt(document.getElementById('bn_doble').value) || 0;
            const anillado = document.getElementById('anillado').checked;

            // Validaciones
            if (color_simple < 0 || color_doble < 0 || bn_simple < 0 || bn_doble < 0) {
                mostrarError("Las cantidades no pueden ser negativas.");
                return;
            }

            const total_hojas_fisicas = color_simple + color_doble + bn_simple + bn_doble;
            
            if (total_hojas_fisicas === 0) {
                mostrarError("Debes ingresar al menos una copia.");
                return;
            }

            // Calcular costos
            let total = 0;
            const items = [];
            let total_impresiones = 0;
            let mensaje_extra = "";

            // Costo color
            if (color_simple > 0 || color_doble > 0) {
                const costo_color = calcularCostoColor(color_simple, color_doble, gramaje, tamano, metodo_pago);
                total += costo_color;
                total_impresiones += color_simple + (color_doble * 2);

                if (color_simple > 0) {
                    items.push({
                        tipo: "Color Simple Faz",
                        cantidad: color_simple,
                        subtotal: calcularCostoColor(color_simple, 0, gramaje, tamano, metodo_pago)
                    });
                }
                if (color_doble > 0) {
                    items.push({
                        tipo: "Color Doble Faz",
                        cantidad: color_doble,
                        subtotal: calcularCostoColor(0, color_doble, gramaje, tamano, metodo_pago)
                    });
                }
            }

            // Costo B/N (solo para 75g)
            if ((bn_simple > 0 || bn_doble > 0) && gramaje === "75g") {
                const resultado_bn = calcularCostoBN(bn_simple, bn_doble, tamano, metodo_pago);
                total += resultado_bn.costo;
                total_impresiones += resultado_bn.total_impresiones;

                if (bn_simple > 0) {
                    items.push({
                        tipo: "B/N Simple Faz",
                        cantidad: bn_simple,
                        subtotal: calcularCostoBN(bn_simple, 0, tamano, metodo_pago).costo
                    });
                }
                if (bn_doble > 0) {
                    items.push({
                        tipo: "B/N Doble Faz",
                        cantidad: bn_doble,
                        subtotal: calcularCostoBN(0, bn_doble, tamano, metodo_pago).costo
                    });
                }

                mensaje_extra = `Promoci√≥n aplicada para B/N: Rango ${resultado_bn.rango}`;
            }

            // Anillado
            if (anillado) {
                let costo_anillado;
                if (total_hojas_fisicas <= 50) {
                    costo_anillado = anillado_precios.hasta_50;
                } else if (total_hojas_fisicas <= 100) {
                    costo_anillado = anillado_precios.hasta_100;
                } else {
                    costo_anillado = anillado_precios.mas_100;
                }
                
                total += costo_anillado;
                items.push({
                    tipo: "Anillado",
                    cantidad: 1,
                    subtotal: costo_anillado
                });
            }

            // Mostrar resultados
            mostrarResultados(total, items, total_hojas_fisicas, total_impresiones, mensaje_extra);
        }

        function mostrarResultados(total, items, total_hojas, total_impresiones, mensaje_extra) {
            const resultsDiv = document.getElementById('results');
            const totalAmount = document.getElementById('totalAmount');
            const itemsList = document.getElementById('itemsList');
            const resultMessage = document.getElementById('resultMessage');

            // Actualizar total
            totalAmount.textContent = `$${total.toFixed(2)}`;

            // Actualizar lista de items
            itemsList.innerHTML = '';
            items.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'item';
                itemDiv.innerHTML = `
                    <span>${item.tipo} (${item.cantidad})</span>
                    <span>$${item.subtotal.toFixed(2)}</span>
                `;
                itemsList.appendChild(itemDiv);
            });

            // Actualizar mensaje
            let mensaje = `Presupuesto calculado exitosamente.<br>`;
            mensaje += `Total de hojas f√≠sicas: ${total_hojas}<br>`;
            mensaje += `Total de impresiones: ${total_impresiones}<br>`;
            if (mensaje_extra) {
                mensaje += mensaje_extra;
            }

            resultMessage.innerHTML = mensaje;
            resultMessage.className = 'message';

            // Mostrar resultados
            resultsDiv.classList.add('show');
        }

        function mostrarError(mensaje) {
            const resultMessage = document.getElementById('resultMessage');
            resultMessage.textContent = mensaje;
            resultMessage.className = 'message error';
            document.getElementById('results').classList.add('show');
        }
    </script>
</body>
</html>